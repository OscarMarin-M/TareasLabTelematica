
import java.net.*;
import java.io.*;

public class ClienteTCP {
  public static void main(String[] args)  throws IOException {
    Socket socketCliente = null;
    BufferedReader entrada = null;
    PrintWriter salida = null;

    // Creamos un socket en el lado cliente, enlazado con un
    // servidor que est치 en la misma m치quina que el cliente
    // y que escucha en el puerto 4444
    try {
      socketCliente = new Socket("localhost", 4444);
      // Obtenemos el canal de entrada
      
      entrada = new BufferedReader(new InputStreamReader(socketCliente.getInputStream()));
      
      // Obtenemos el canal de salida
      salida = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socketCliente.getOutputStream())),true);
    } catch (IOException e) {
	System.err.println("No puede establer canales de E/S para la conexi칩n");
        System.exit(-1);
    }
    BufferedReader stdIn = new BufferedReader(new InputStreamReader(System.in));
    String linea;
    
    try {
    	boolean sw = true;
      while (sw) {
    	  System.out.println("------------------------");
          System.out.println("Pulse 1 para OPCION 1");
          System.out.println("Pulse 2 para OPCION 2");
          System.out.println("Pulse 3 para OPCION 3");
          System.out.println("Escriba salir para cerrar conexion");
          System.out.println("-----------------------------------------");
        linea = stdIn.readLine();
        
        salida.println(linea);

        
        if (linea.equals("salir")) sw = false ;
        else {
        linea = entrada.readLine();
        System.out.println("RESPUESTA DEL SERVIDOR: " + linea);
        // Si es "Adios" es que finaliza la comunicaci칩n
        }
        
      }
    } catch (IOException e) {
	System.out.println("IOException: " + e.getMessage());
    }
 
    // Libera recursos
    salida.close();
    entrada.close();
    stdIn.close();
    socketCliente.close();
  }
}
